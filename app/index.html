<!doctype html>
<html lang="en" ng-app="AnnotatedTutorial">
  <head>
    <meta charset="UTF-8">
    <title>Annotated Tutorial</title>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <link rel="stylesheet" href="css/main.css">
    <!-- build:[src] scripts/ -->
    <script src="modernizr/modernizr.js"></script>
    <!-- /build -->
  </head>
  <body ng-controller="mainController" ng-class="{'overlay': selectingLine}">

    <div class="l-wrap">
      <div class="grid grid--full is-extended">
        <div class="grid__item three-quarters is-extended">
          <h1>Remove Red Eye</h1>
          <div class="content" ng-repeat="section in tutorial">

            <!-- Icons for notes -->
            <div class="icon-container">
              <button class="icon icon-details"
                      ng-if="section.notes.details.length > 0"
                      ng-click="$parent.showDetails = !showDetails">+</button>
              <button class="icon icon-corrections"
                      ng-if="section.notes.corrections.length > 0"
                      ng-click="$parent.showCorrections = !showCorrections">!</button>
              <button class="icon icon-methods"
                      ng-if="section.notes.methods.length > 0"
                      ng-click="$parent.showMethods = !showMethods">&#8618;</button>
              <button class="icon icon-command"
                      ng-if="section.notes.command.length > 0"
                      ng-click="$parent.showCommand = !showCommand">?</button>
            </div>

            <!-- Tutorial step -->
            <div ng-class="{'hoverLine': $parent.selectingLine,
                  'highlight': $parent.selectedLine == $index}"
                 ng-click="lineClicked($index, $event)">
              {{section.content}}
            </div>

            <!-- Notes for step -->
            <div ng-show="showDetails">
              <div class="note note-details" ng-repeat="note in section.notes.details">{{note}}</div>
            </div>
            <div ng-show="showCorrections">
              <div class="note note-corrections" ng-repeat="note in section.notes.corrections">{{note}}</div>
            </div>
            <div ng-show="showMethods">
              <div class="note note-methods" ng-repeat="note in section.notes.methods">{{note}}</div>
            </div>
            <div ng-show="showCommand">
              <div class="note note-command" ng-repeat="note in section.notes.command">{{note}}</div>
            </div>
          </div>
        </div>

        <div class="grid__item one-quarter">
          <div class="input-container" ng-if="inputPos >= 0" ng-style="{'top':inputPos + 'px'}">
            <div>
              <button ng-click="typeSelected('details')" class="icon icon-details" ng-class="{'note-details': inputType == 'details'}">+</button>
              <button ng-click="typeSelected('corrections')" class="icon icon-corrections" ng-class="{'note-corrections': inputType == 'corrections'}">!</button>
              <button ng-click="typeSelected('methods')" class="icon icon-methods" ng-class="{'note-methods': inputType == 'methods'}">&#8618;</button>
              <button ng-click="typeSelected('command')" class="icon icon-command" ng-class="{'note-command': inputType == 'command'}">?</button>
              <button ng-click="closeInput()" class="plain-button">Close</button>
            </div>
            <div ng-show="showTextarea">
              <div ng-if="inputType == 'details'">Additional details help other readers understand how to complete a step and why it is important.</div>
              <div ng-if="inputType == 'corrections'">Corrections alert other readers of an error in the tutorial, or of a detail that might differ in different software versions.</div>
              <div ng-if="inputType == 'methods'">Alternate methods describe a different way of accomplishing a step.</div>
              <div ng-if="inputType == 'command'">Command locations help other readers locate a command, tool, option or other menu item.</div>
              <textarea class="input-text" ng-model="$parent.newNote" placeholder="Please enter your note here."></textarea>
              <button ng-click="submitNote()" class="plain-button">Submit</button>
            </div>
          </div>
        </div>

        <div class="input-start-container">
          <div class="highlight input-start" ng-if="selectingLine">Please select the location for your note.</div>
          <button class="input-start" ng-class="{'highlight': selectingLine}" ng-click="toggleSelectMode()">Add a note</button>
        </div>
      </div>
    </div>

    <!-- build:js scripts/dependencies.js -->
    <script src="/angularjs/angular.js"></script>
    <!-- /build -->

    <!-- build:js scripts/templates.js -->
    <script src="/scripts/templates/templates.js"></script>
    <!-- /build -->

    <!-- build:js scripts/app.js -->
    <script src="/scripts/app.js"></script>
    <script src="/scripts/tutorialService.js"></script>
    <script src="/scripts/mainController.js"></script>
    <!-- /build -->
  </body>
</html>